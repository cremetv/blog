"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:void 0,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var n=this._events=this._events||{},o=n[e]=n[e]||[];return-1==o.indexOf(t)&&o.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var n=this._onceEvents=this._onceEvents||{};return(n[e]=n[e]||{})[t]=!0,this}},t.off=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){var o=n.indexOf(t);return-1!=o&&n.splice(o,1),this}},t.emitEvent=function(e,t){var n=this._events&&this._events[e];if(n&&n.length){n=n.slice(0),t=t||[];for(var o=this._onceEvents&&this._onceEvents[e],i=0;i<n.length;i++){var r=n[i];o&&o[r]&&(this.off(e,r),delete o[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,n){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return n(t,e)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=n(t,require("ev-emitter")):t.imagesLoaded=n(t,t.EvEmitter)}("undefined"!=typeof window?window:void 0,function(t,e){function r(e,t){for(var n in t)e[n]=t[n];return e}function s(e,t,n){if(!(this instanceof s))return new s(e,t,n);var o,i=e;("string"==typeof e&&(i=document.querySelectorAll(e)),i)?(this.elements=(o=i,Array.isArray(o)?o:"object"==(void 0===o?"undefined":_typeof(o))&&"number"==typeof o.length?u.call(o):[o]),this.options=r({},this.options),"function"==typeof t?n=t:r(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred),setTimeout(this.check.bind(this))):c.error("Bad element for imagesLoaded "+(i||e))}function n(e){this.img=e}function o(e,t){this.url=e,this.element=t,this.img=new Image}var a=t.jQuery,c=t.console,u=Array.prototype.slice;s.prototype=Object.create(e.prototype),s.prototype.options={},s.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},s.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&d[t]){for(var n=e.querySelectorAll("img"),o=0;o<n.length;o++){var i=n[o];this.addImage(i)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(o=0;o<r.length;o++){var s=r[o];this.addElementBackgroundImages(s)}}}};var d={1:!0,9:!0,11:!0};return s.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var n=/url\((['"])?(.*?)\1\)/gi,o=n.exec(t.backgroundImage);null!==o;){var i=o&&o[2];i&&this.addBackground(i,e),o=n.exec(t.backgroundImage)}},s.prototype.addImage=function(e){var t=new n(e);this.images.push(t)},s.prototype.addBackground=function(e,t){var n=new o(e,t);this.images.push(n)},s.prototype.check=function(){function t(e,t,n){setTimeout(function(){o.progress(e,t,n)})}var o=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},s.prototype.progress=function(e,t,n){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&c&&c.log("progress: "+n,e,t)},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},n.prototype=Object.create(e.prototype),n.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},n.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},n.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},n.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},n.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},n.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype=Object.create(n.prototype),o.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},o.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},s.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((a=e).fn.imagesLoaded=function(e,t){return new s(this,e,t).jqDeferred.promise(a(this))})},s.makeJQueryPlugin(),s});var barbaWrap=document.querySelectorAll(".barba-container")[0];barba.init({views:[{namespace:"home",afterEnter:function(e){console.log("after enter home")}},{namespace:"post",afterEnter:function(e){console.log("after enter post")}},{namespace:"about",afterEnter:function(e){console.log("after enter ueber uns")}},{namespace:"legal",afterEnter:function(e){console.log("after enter legal")}}],transitions:[{leave:function(e){var t=e.current,n=(e.next,e.trigger,this.async());console.log("leave"),console.log(t),TweenMax.to(t.container,1,{y:300,autoAlpha:0,ease:Power4.easeOut,onComplete:function(){n()}})},enter:function(e){e.current;var t=e.next,n=(e.trigger,this.async());console.log("enter"),console.log(t),n(),TweenMax.from(t.container,1,{y:300,autoAlpha:0,ease:Power4.easeOut})}}]}),window.onload=function(){console.log("sw!!");"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("./sw.js").then(function(e){console.log("Service Worker is registered",e),e}).catch(function(e){console.error("Service Worker Error",e)}),self.addEventListener("push",function(e){console.log("[Service Worker] Push Received."),console.log('[Service Worker] Push had this data: "'+e.data.text()+'"');e.waitUntil(self.registration.showNotification("Push Codelab",{body:"Yay it works.",icon:"images/icon.png",badge:"images/badge.png"}))})};var getToken=function(){return new Promise(function(t,n){var e=new XMLHttpRequest;e.open("POST","../instagram.json",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.addEventListener("load",function(){var e=JSON.parse(this.response);e.accessToken?t(e.accessToken):n("error")}),e.send()})},getInstaFeed=function(e){var t="https://api.instagram.com/v1/users/self/media/recent/?access_token="+e,n=new XMLHttpRequest;n.open("GET",t,!0),n.withCredentials=!0,n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Access-Control-Allow-Origin","*"),n.addEventListener("load",function(){var e=JSON.parse(this.repsone);if(console.log(e),e){var t=e.data,i=0;t.reverse().forEach(function(e){if(!(5<=i)){var t=e.caption.text,n=e.link,o=e.images.standard_resolution.url;console.log(t),console.log(n),console.log(o),i++}})}}),n.send()};document.addEventListener("DOMContentLoaded",function(){getToken().then(function(e){getInstaFeed(e)},function(e){console.log("error: "+e)})});var menuOpen=!1,html=document.querySelector("html"),burger=document.querySelectorAll(".burger")[0],menu=document.querySelectorAll(".main-menu")[0],openMenu=function(){menuOpen=!0,burger.classList.add("open"),menu.classList.add("open"),html.classList.add("overflow"),TweenMax.to(menu,1,{x:0,ease:Power4.easeOut})},closeMenu=function(){menuOpen=!1,burger.classList.remove("open"),menu.classList.remove("open"),html.classList.remove("overflow"),TweenMax.to(menu,1,{x:"100vw",ease:Power4.easeOut})};burger.addEventListener("click",function(){menuOpen?closeMenu():openMenu()}),window.addEventListener("resize",function(){960<window.innerWidth?TweenMax.to(menu,1,{x:0,ease:Power4.easeOut}):window.innerWidth<960&&!menuOpen&&TweenMax.to(menu,1,{x:"100vw",ease:Power4.easeOut})});