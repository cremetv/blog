"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:void 0,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var o=this._events=this._events||{},n=o[e]=o[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var o=this._onceEvents=this._onceEvents||{};return(o[e]=o[e]||{})[t]=!0,this}},t.off=function(e,t){var o=this._events&&this._events[e];if(o&&o.length){var n=o.indexOf(t);return-1!=n&&o.splice(n,1),this}},t.emitEvent=function(e,t){var o=this._events&&this._events[e];if(o&&o.length){o=o.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<o.length;i++){var s=o[i];n&&n[s]&&(this.off(e,s),delete n[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,o){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return o(t,e)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=o(t,require("ev-emitter")):t.imagesLoaded=o(t,t.EvEmitter)}("undefined"!=typeof window?window:void 0,function(t,e){function s(e,t){for(var o in t)e[o]=t[o];return e}function r(e,t,o){if(!(this instanceof r))return new r(e,t,o);var n,i=e;("string"==typeof e&&(i=document.querySelectorAll(e)),i)?(this.elements=(n=i,Array.isArray(n)?n:"object"==(void 0===n?"undefined":_typeof(n))&&"number"==typeof n.length?c.call(n):[n]),this.options=s({},this.options),"function"==typeof t?o=t:s(this.options,t),o&&this.on("always",o),this.getImages(),a&&(this.jqDeferred=new a.Deferred),setTimeout(this.check.bind(this))):d.error("Bad element for imagesLoaded "+(i||e))}function o(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}var a=t.jQuery,d=t.console,c=Array.prototype.slice;r.prototype=Object.create(e.prototype),r.prototype.options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var o=e.querySelectorAll("img"),n=0;n<o.length;n++){var i=o[n];this.addImage(i)}if("string"==typeof this.options.background){var s=e.querySelectorAll(this.options.background);for(n=0;n<s.length;n++){var r=s[n];this.addElementBackgroundImages(r)}}}};var u={1:!0,9:!0,11:!0};return r.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var o=/url\((['"])?(.*?)\1\)/gi,n=o.exec(t.backgroundImage);null!==n;){var i=n&&n[2];i&&this.addBackground(i,e),n=o.exec(t.backgroundImage)}},r.prototype.addImage=function(e){var t=new o(e);this.images.push(t)},r.prototype.addBackground=function(e,t){var o=new n(e,t);this.images.push(o)},r.prototype.check=function(){function t(e,t,o){setTimeout(function(){n.progress(e,t,o)})}var n=this;this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},r.prototype.progress=function(e,t,o){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&d&&d.log("progress: "+o,e,t)},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},o.prototype=Object.create(e.prototype),o.prototype.check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},o.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},o.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},o.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},o.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},o.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},o.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype=Object.create(o.prototype),n.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},r.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((a=e).fn.imagesLoaded=function(e,t){return new r(this,e,t).jqDeferred.promise(a(this))})},r.makeJQueryPlugin(),r}),window.onload=function(){parallax(),initMenu(),console.log("sw!!");"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("./sw.js").then(function(e){console.log("Service Worker is registered",e),e}).catch(function(e){console.error("Service Worker Error",e)})};var getToken=function(){return new Promise(function(t,o){var e=new XMLHttpRequest;e.open("POST","../instagram.json",!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.addEventListener("load",function(){console.log(this.response);var e=JSON.parse(this.response);e.accessToken?t(e.accessToken):o("error")}),e.send()})},getInstaFeed=function(e){var t="https://api.instagram.com/v1/users/self/media/recent/?access_token="+e,o=new XMLHttpRequest;o.open("GET",t,!0),o.withCredentials=!0,o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.setRequestHeader("Access-Control-Allow-Origin","*"),o.setRequestHeader("Access-Control-Allow-Credentials","true"),o.setRequestHeader("Access-Control-Allow-Credentials",!0),o.addEventListener("load",function(){var e=JSON.parse(this.repsone);if(console.log(e),e){var t=e.data,i=0;t.reverse().forEach(function(e){if(!(5<=i)){var t=e.caption.text,o=e.link,n=e.images.standard_resolution.url;console.log(t),console.log(o),console.log(n),i++}})}}),o.send()};document.addEventListener("DOMContentLoaded",function(){getInstaFeed("8034804456.64a966e.d2637c84d7f749dabfe3f93962bfb391")});var initMenu=function(){console.log("init menu");var e=!1,r=!1,a=0,t=document.querySelector("html"),d=document.querySelectorAll(".burger")[0],c=document.querySelectorAll(".main-menu")[0],u=document.querySelectorAll(".main-header")[0],l=document.querySelectorAll(".sidebar")[0],h=document.querySelectorAll(".main-footer")[0];d.addEventListener("click",function(){e?(e=!1,d.classList.remove("open"),c.classList.remove("open"),t.classList.remove("overflow"),TweenMax.to(c,1,{x:"100vw",ease:Power4.easeOut})):(e=!0,d.classList.add("open"),c.classList.add("open"),t.classList.add("overflow"),TweenMax.to(c,1,{x:0,ease:Power4.easeOut}))}),window.addEventListener("resize",function(){960<window.innerWidth?TweenMax.to(c,1,{x:0,ease:Power4.easeOut}):window.innerWidth<960&&!e&&TweenMax.to(c,1,{x:"100vw",ease:Power4.easeOut})});var o=function(){var e,t,o,n,i,s=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);e=s,t=window.innerWidth<960?c:u,(o=window.innerWidth<960?u:c).classList.remove("fixed"),o.classList.remove("slide-up"),0==e?t.classList.remove("fixed"):t.classList.add("fixed"),10<a-e?(t.classList.remove("slide-up"),d.classList.remove("slide-up")):10<e-a&&150<e&&(t.classList.add("slide-up"),d.classList.add("slide-up")),n=s,i=l.offsetTop,960<window.innerWidth&&(n<i-c.offsetHeight-40?TweenMax.to(l,0,{y:0,ease:Power0.easeNone}):n>=i-c.offsetHeight-40&&n<document.body.offsetHeight-h.offsetHeight-l.offsetHeight-c.offsetHeight-80&&TweenMax.to(l,0,{y:n-(i-c.offsetHeight-40),ease:Power0.easeNone})),a=s,r=!1};window.addEventListener("scroll",function(){r||(r=!0,window.requestAnimationFrame?requestAnimationFrame(o):setTimeout(o,250))})},parallax=function(){var t=document.querySelectorAll(".intro");document.querySelectorAll(".main-menu")[0],document.querySelectorAll(".main-footer")[0];t.forEach(function(e){var t=e.getElementsByTagName("img")[0],o=e.offsetHeight,n=e.offsetTop,i=(0-n)/o*o/2;TweenMax.set(t,{y:i+"px"})}),window.addEventListener("scroll",function(e){var s=window.scrollY,r=s+window.innerHeight;t.forEach(function(e){var t=e.getElementsByTagName("img")[0],o=e.offsetHeight,n=e.offsetTop;if(n<=r&&s<=n+o){var i=(s-n)/o*o/2;TweenMax.to(t,0,{y:i+"px",ease:Power0.easeNone})}})})};